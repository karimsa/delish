{"version":3,"sources":["bundle.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","now","func","wait","immediate","later","last","timestamp","timeout","setTimeout","result","apply","context","args","this","arguments","callNow","date-now","2","Date","getTime","3","EventEmitter","_events","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","prototype","defaultMaxListeners","setMaxListeners","isNaN","TypeError","emit","type","er","handler","len","listeners","error","err","Array","slice","addListener","listener","m","newListener","push","warned","console","trace","on","once","g","removeListener","fired","list","position","splice","removeAllListeners","key","listenerCount","evlistener","emitter","4","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","run","Item","array","noop","process","nextTick","title","browser","env","argv","version","versions","off","binding","name","cwd","chdir","dir","umask","5","Object","create","ctor","superCtor","super_","constructor","value","enumerable","writable","configurable","TempCtor","6","copy","fill","readUInt8","7","global","inspect","obj","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","str","styleType","style","styles","arrayToHash","hash","forEach","val","idx","recurseTimes","ret","isString","primitive","formatPrimitive","keys","visibleKeys","getOwnPropertyNames","isError","indexOf","formatError","isRegExp","RegExp","toString","isDate","base","braces","isArray","toUTCString","output","formatArray","map","formatProperty","pop","reduceToSingleString","simple","JSON","stringify","replace","isNull","hasOwnProperty","String","match","desc","getOwnPropertyDescriptor","get","set","split","line","join","substr","numLinesEst","reduce","prev","cur","ar","isNullOrUndefined","isSymbol","re","objectToString","d","isPrimitive","pad","time","getHours","getMinutes","getSeconds","getDate","months","getMonth","prop","format","objects","x","Number","_","deprecate","fn","msg","deprecated","throwDeprecation","traceDeprecation","noDeprecation","debugEnviron","debugs","debuglog","NODE_DEBUG","toUpperCase","test","pid","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","number","boolean","null","string","date","regexp","isBuffer","log","inherits","origin","add","self","window","./support/isBuffer","_process","8","_interopRequireDefault","__esModule","default","defineProperty","_map","_map2","_search","_search2","_search3","_search4","exceptionHandler","resolve","reject","app","angular","factory","config","$router","$location","otherwise","html5Mode","controller","element","bootstrap","document","./controllers/map","./controllers/search","./factories/search","9","_socket","_socket2","_debounce","_debounce2","_location","ready","getNearby","_getMap$center","getMap","center","lat","lng","radius","results","spot","plot","getFirstLocation","getMapWhenReady","../location","../map","../socket","debounce","10","$scope","search","query","hint","$apply","_getCurrentLocation","getCurrentLocation","prediction","complete","evt","which","11","ParamTypes","12","done","location","getLocationAlways","_logger","locEmitter","navigator","geolocation","watchPosition","pos","coords","latitude","longitude","fail","enableHighAccuracy","assign","callback","./logger","events","13","logLater","_this","Math","min","currentLog","nextLog","$","logInProgress","_log","failOnce","appHasFailed","addClass","logElm","util","text","removeClass","parent","remove","append","trackJs","track","14","_classCallCheck","instance","Constructor","getDistance","_ref","_ref2","lat1","lon1","lat2","lon2","dLat","PI","dLon","sin","cos","atan2","sqrt","simpleLatLng","latlng","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","_options","_options2","spotID","geometry","Spot","google","maps","Marker","animation","Animation","DROP","Map","elm","spots","event","addListenerOnce","you","icon","url","size","Size","scaledSize","setPosition","getCenter","setCenter","getZoom","getBounds","getNorthEast","id","./options","15","zoom","minZoom","mapTypeId","tilt","disableDefaultUI","clickableIcons","zoomControl","./styles/hybrid","16","featureType","elementType","stylers","visibility","17","next","tasks","order","documentElement","classList","warn","Promise","then","catch","_app","_app2","mapReady","initMap","Locating you","Creating sexy map","createElement","body","insertBefore","children","script","src","appendChild","Wrapping up","./app","./location","./map","18","sock","io"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar now = require('date-now');\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = now() - timestamp;\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n};\n\n},{\"date-now\":2}],2:[function(require,module,exports){\nmodule.exports = Date.now || now\n\nfunction now() {\n    return new Date().getTime()\n}\n\n},{}],3:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n},{}],4:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],5:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n},{}],6:[function(require,module,exports){\nmodule.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n},{}],7:[function(require,module,exports){\n(function (process,global){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./support/isBuffer\":6,\"_process\":4,\"inherits\":5}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _map = require('./controllers/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _search = require('./controllers/search');\n\nvar _search2 = _interopRequireDefault(_search);\n\nvar _search3 = require('./factories/search');\n\nvar _search4 = _interopRequireDefault(_search3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (exceptionHandler) {\n  return function (resolve, reject) {\n    try {\n      var app = angular.module('delish', ['ngRoute', 'ngAnimate']);\n\n      app.factory('$exceptionHandler', function () {\n        return exceptionHandler;\n      });\n      app.factory('$searchParams', _search4.default);\n\n      app.config(['$routeProvider', '$locationProvider', function ($router, $location) {\n        $router.otherwise('/');\n        $location.html5Mode(true);\n      }]);\n\n      app.controller('MapCtl', (0, _map2.default)(resolve));\n      app.controller('SearchCtl', _search2.default);\n\n      angular.element(function () {\n        return angular.bootstrap(document, ['delish']);\n      });\n    } catch (err) {\n      reject(err);\n    }\n  };\n}; /**\n    * public/src/js/app.js - delish\n    * \n    * Licensed under MIT license.\n    * Copyright (C) 2017 Karim Alibhai.\n    */\n/* globals angular */\n\n},{\"./controllers/map\":9,\"./controllers/search\":10,\"./factories/search\":11}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _socket = require('../socket');\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nvar _debounce = require('debounce');\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nvar _location = require('../location');\n\nvar _map = require('../map');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * public/src/js/controllers/map.js - delish\n * \n * Licensed under MIT license.\n * Copyright (C) 2017 Karim Alibhai.\n */\n\nexports.default = function (ready) {\n  return [function () {\n    /**\n     * Executes a nearby search using params.\n     * @param {LatLngLiteral} latlng an object literal with latitutde and longitude\n     * @param {Number} latlng.lat the latitude of the literal\n     * @param {Number} latlng.lng the longitude of the literal\n     */\n    var getNearby = (0, _debounce2.default)(function () {\n      var _getMap$center = (0, _map.getMap)().center(),\n          lat = _getMap$center.lat,\n          lng = _getMap$center.lng;\n\n      _socket2.default.emit('nearby', {\n        lat: lat,\n        lng: lng,\n        radius: (0, _map.getMap)().radius()\n      });\n    }, 300);\n\n    /**\n     * Handle nearby search results.\n     */\n    _socket2.default.on('nearby:results', function (results) {\n      return results.map(function (spot) {\n        return (0, _map.getMap)().plot(spot);\n      });\n    });\n\n    /**\n     * Attach the marker mapping function to changes in\n     * the map's position.\n     */\n    (0, _map.getMap)().on('zoom_changed', getNearby).on('dragend', getNearby);\n\n    // init the map\n    (0, _location.getFirstLocation)(function () {\n      return (0, _map.getMapWhenReady)(function () {\n        ready();\n        setTimeout(getNearby, 0);\n      });\n    });\n  }];\n};\n\n},{\"../location\":12,\"../map\":14,\"../socket\":18,\"debounce\":1}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _socket = require('../socket');\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nvar _debounce = require('debounce');\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nvar _location = require('../location');\n\nvar _map = require('../map');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * public/src/js/controllers/search.js - delish\n * \n * Licensed under MIT license.\n * Copyright (C) 2017 Karim Alibhai.\n */\n\nexports.default = ['$scope', function ($scope) {\n  $scope.search = (0, _debounce2.default)(function (query) {\n    if (!query) {\n      $scope.hint = '';\n      return $scope.$apply();\n    }\n\n    var _getCurrentLocation = (0, _location.getCurrentLocation)(),\n        lat = _getCurrentLocation.lat,\n        lng = _getCurrentLocation.lng;\n\n    _socket2.default.emit('autocomplete', {\n      query: query,\n      lat: lat,\n      lng: lng,\n      radius: (0, _map.getMap)().radius()\n    });\n  }, 500);\n\n  $scope.prediction = function () {\n    return $scope.hint && $scope.query ? $scope.query + $scope.hint.substr($scope.query.length) : '';\n  };\n\n  $scope.complete = function (evt) {\n    if (evt.which === 39) {\n      $scope.query = $scope.prediction();\n    }\n  };\n\n  _socket2.default.on('autocomplete:results', function (result) {\n    $scope.hint = result;\n    $scope.$apply();\n  });\n}];\n\n},{\"../location\":12,\"../map\":14,\"../socket\":18,\"debounce\":1}],11:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * public/src/js/factories/search.js - delish\n * \n * Licensed under MIT license.\n * Copyright (C) 2017 Karim Alibhai.\n */\n\nexports.default = function () {\n  var params = {};\n  return params;\n};\n\n/**\n * Type and option information for each search parameter\n * for view construction.\n */\n\n\nvar ParamTypes = exports.ParamTypes = {};\n\n},{}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLocationAlways = exports.getCurrentLocation = undefined;\nexports.getFirstLocation = getFirstLocation;\n\nvar _logger = require('./logger');\n\nvar _events = require('events');\n\n/**\n * public/src/js/location.js - delish\n * \n * Licensed under MIT license.\n * Copyright (C) 2017 Karim Alibhai.\n */\n\nvar locEmitter = new _events.EventEmitter();\nvar location = {};\n\nnavigator.geolocation.watchPosition(function (pos) {\n  location.lat = pos.coords.latitude;\n  location.lng = pos.coords.longitude;\n\n  locEmitter.emit('update', getCurrentLocation());\n}, _logger.fail, {\n  enableHighAccuracy: true\n});\n\n/**\n * @returns {LatLng} a copy of the user's current location\n */\nvar getCurrentLocation = exports.getCurrentLocation = function getCurrentLocation() {\n  return Object.assign({}, location);\n};\n\n/**\n * Get the first available location.\n */\nfunction getFirstLocation(done) {\n  if (location.lat === undefined) {\n    setTimeout(function () {\n      return getFirstLocation(done);\n    }, 0);\n  } else {\n    done(getCurrentLocation());\n  }\n}\n\n/**\n * Attaches an event handler to location updates.\n * @param {Function} callback an event handler for location updates\n */\nvar getLocationAlways = exports.getLocationAlways = function getLocationAlways(callback) {\n  return locEmitter.on('update', callback);\n};\n\n},{\"./logger\":13,\"events\":3}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.failOnce = failOnce;\n/**\n * public/src/js/logger.js - delish\n * \n * Licensed under MIT license.\n * Copyright (C) 2017 Karim Alibhai.\n */\n/* globals $, trackJs */\n\nvar util = require('util');\n\nvar currentLog = $('.lead:eq(0)'),\n    nextLog = $('.lead.next'),\n    appHasFailed = false,\n    logInProgress = false;\n\n/**\n * Actual logger.\n */\nvar _log = function _log() {\n  if (logInProgress) return;\n  logInProgress = true;\n\n  var text = util.format.apply(util, arguments);\n\n  // ensure that dom is ready\n  if (Math.min(currentLog.length, nextLog.length) === 0) {\n    currentLog = $('.lead:eq(0)');\n    nextLog = $('.lead.next');\n\n    if (Math.min(currentLog.length, nextLog.length) === 0) {\n      logInProgress = false;\n      return $(function () {\n        return _log(text);\n      });\n    }\n  }\n\n  // transition to the new log\n  nextLog.text(text);\n  currentLog.addClass('hide');\n  nextLog.removeClass('next');\n\n  // after the CSS transition completes, swap\n  // the log elements out\n  setTimeout(function () {\n    var parent = currentLog.parent();\n    currentLog.remove();\n    currentLog = nextLog;\n\n    nextLog = $('<p class=\"lead next\"></p>');\n    parent.append(nextLog);\n\n    logInProgress = false;\n  }, 700);\n\n  // return reference to the log element used\n  return nextLog;\n};\n\n/**\n * Logs when current log is done.\n */\nfunction logLater(done) {\n  var _this = this;\n\n  var args = [].slice.call(arguments);\n\n  if (Math.min(currentLog.length, nextLog.length) === 0) {\n    currentLog = $('.lead:eq(0)');\n    nextLog = $('.lead.next');\n\n    setTimeout(function () {\n      return logLater.apply(_this, args);\n    }, 0);\n  } else if (logInProgress) {\n    setTimeout(function () {\n      return logLater.apply(_this, args);\n    }, 0);\n  } else {\n    done(_log.apply(this, args.slice(1)));\n  }\n}\n\n/**\n * Updates the current log status.\n * @param {?Function} done a callback to execute if the log happens\n * @param {String} message the string with formatting\n * @param {...Object} values any values to plug in\n */\nvar log = exports.log = function log() {\n  if (!appHasFailed) {\n    return _log.apply(this, arguments);\n  }\n};\n\n/**\n * Displays the error.\n */\nfunction failOnce() {\n  if (appHasFailed) return;\n  appHasFailed = true;\n  $('html').addClass('error');\n\n  logLater(function (logElm) {\n    return logElm.addClass('error-msg').addClass('col-8').addClass('offset-2');\n  }, 'Things have gone horribly wrong. I think your computer is going to explode. But what do I know, I\\'m just an error message.');\n}\n\n/**\n * Handle task failure.\n */\nvar fail = exports.fail = function fail(err) {\n  return trackJs.track(err);\n};\n\n},{\"util\":7}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getMapWhenReady = exports.getMap = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _options = require('./options');\n\nvar _options2 = _interopRequireDefault(_options);\n\nvar _location = require('../location');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n                                                                                                                                                           * public/src/js/map.js - delish\n                                                                                                                                                           * \n                                                                                                                                                           * Licensed under MIT license.\n                                                                                                                                                           * Copyright (C) 2017 Karim Alibhai.\n                                                                                                                                                           */\n/* globals google */\n\n/**\n * Gets the distance (in meters) between two points on a map. (Source: http://stackoverflow.com/a/11172685)\n * @param {LatLng} start one of the two points\n * @param {LatLng} end the other point\n * @returns {Number} the distance between start and end\n */\nfunction getDistance(_ref, _ref2) {\n  var lat1 = _ref.lat,\n      lon1 = _ref.lng;\n  var lat2 = _ref2.lat,\n      lon2 = _ref2.lng;\n\n  var R = 6378.137,\n      dLat = lat2 * Math.PI / 180 - lat1 * Math.PI / 180,\n      dLon = lon2 * Math.PI / 180 - lon1 * Math.PI / 180,\n      a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2),\n      c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n  return R * c * 1000;\n}\n\n/**\n * Converts a LatLng object from a map to a literal.\n * @param {LatLng} latlng a proper LatLng object from the google map API\n * @returns {LatLngLiteral} the simplified LatLngLiteral object\n */\nfunction simpleLatLng(latlng) {\n  return {\n    lat: latlng.lat(),\n    lng: latlng.lng()\n  };\n}\n\n/**\n * @returns {String} the unique ID of this spot\n */\nvar spotID = function spotID(spot) {\n  return [spot.name, spot.geometry.location.lat, spot.geometry.location.lng].join(',');\n};\n\n/**\n * Marker wrapper for manipulating the marker.\n */\n\nvar Spot =\n/**\n * Creates a new Spot instance.\n * @param {Spot} spot the search result to plot\n * @param {Map} map the Google Map instance to plot on\n */\nfunction Spot(spot, map) {\n  _classCallCheck(this, Spot);\n\n  this.marker = new google.maps.Marker({\n    position: spot.geometry.location,\n    map: map,\n    title: spot.name,\n    animation: google.maps.Animation.DROP\n  });\n};\n\n/**\n * Map wrapper. For easier handling.\n */\n\n\nvar Map = function () {\n  function Map(elm, ready) {\n    var _this = this;\n\n    _classCallCheck(this, Map);\n\n    this.map = new google.maps.Map(elm, _options2.default);\n    this.spots = {};\n\n    google.maps.event.addListenerOnce(this.map, 'bounds_changed', ready);\n    (0, _location.getFirstLocation)(function (pos) {\n      _this.center(pos.lat, pos.lng);\n      _this.you = new google.maps.Marker({\n        position: pos,\n        map: _this.map,\n        title: 'This is you. Don\\'t click you.',\n        animation: google.maps.Animation.DROP,\n        icon: {\n          url: '/dist/img/you.png',\n          size: new google.maps.Size(54.92537312, 64),\n          scaledSize: new google.maps.Size(54.92537312, 64)\n        }\n      });\n\n      (0, _location.getLocationAlways)(function (pos) {\n        _this.you.setPosition(pos);\n      });\n    });\n  }\n\n  /**\n   * Centers the map.\n   * \n   * @param {number} lat the latitude of the center\n   * @param {number} lng the longitude of the center\n   * @returns {Map} current object for chaining\n   */\n\n\n  _createClass(Map, [{\n    key: 'center',\n    value: function center(lat, lng) {\n      if (lat === undefined) return simpleLatLng(this.map.getCenter());\n\n      this.map.setCenter({ lat: lat, lng: lng });\n      return this;\n    }\n\n    /**\n     * @returns {Number} the current zoom level\n     */\n\n  }, {\n    key: 'zoom',\n    value: function zoom() {\n      return this.map.getZoom();\n    }\n\n    /**\n     * Gets the viewable radius of this map.\n     * @returns {Number} the viewable radius in meters\n     */\n\n  }, {\n    key: 'radius',\n    value: function radius() {\n      return getDistance(simpleLatLng(this.map.getCenter()), simpleLatLng(this.map.getBounds().getNorthEast()));\n    }\n\n    /**\n     * Creates and plots a new spot on the map.\n     * \n     * @param {Object} spot a search result for nearby restaurants\n     * @returns {Spot} a new spot instance\n     */\n\n  }, {\n    key: 'plot',\n    value: function plot(spot) {\n      var id = spotID(spot);\n\n      if (!this.spots.hasOwnProperty(id)) {\n        this.spots[id] = new Spot(spot, this.map);\n      }\n\n      return this.spots[id];\n    }\n\n    /**\n     * Attachs a callback to an event.\n     * @param {String} event the name of the event\n     * @param {Function} handler the callback to handle the event\n     * @returns {Map} the current object for chaining\n     */\n\n  }, {\n    key: 'on',\n    value: function on(event, handler) {\n      this.map.addListener(event, handler);\n      return this;\n    }\n  }]);\n\n  return Map;\n}();\n\nvar map = void 0;\n\n/**\n * Creates a new map instance.\n * @param {HTMLElement} elm an HTML element to use as the map\n * @returns {Map} a new map instance\n */\n\nexports.default = function (elm, ready) {\n  return map = new Map(elm, ready);\n};\n\n/**\n * Gets the current map instance.\n * @returns {Map} the saved map instance\n */\n\n\nvar getMap = exports.getMap = function getMap() {\n  return map;\n};\n\n/**\n * Gets the map instance, if ready.\n * @param {Function} done callback to call when map becomes ready\n */\nvar getMapWhenReady = exports.getMapWhenReady = function getMapWhenReady(done) {\n  if (map) done(map);else setTimeout(function () {\n    return getMapWhenReady(done);\n  }, 0);\n};\n\n},{\"../location\":12,\"./options\":15}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * public/src/js/map/options.js - delish\n * \n * Licensed under MIT license.\n * Copyright (C) 2017 Karim Alibhai.\n */\n\nexports.default = {\n  /**\n   * Default zoom of 16 allows user to see streets.\n   */\n  zoom: 18,\n\n  /**\n   * Further than 14 shows more than just the current\n   * city typically, so it's useless to the application.\n   */\n  minZoom: 14,\n\n  /**\n   * See styles file for info on styles.\n   */\n  styles: require('./styles/hybrid'),\n\n  /**\n   * The combination of these two properties allows\n   * a much more interesting view.\n   */\n  mapTypeId: 'hybrid',\n  tilt: 45,\n\n  /**\n   * Gets rid of the UI provided by Google Maps, with\n   * the exception of their terms of use and logo.\n   */\n  disableDefaultUI: true,\n\n  /**\n   * We want custom windows for markers.\n   */\n  clickableIcons: false,\n\n  /**\n   * The zoom control is a nice part of the UI, it helps\n   * users control the zoom in more ways than just by using\n   * their mouse & scroll.\n   */\n  zoomControl: true\n};\n\n},{\"./styles/hybrid\":16}],16:[function(require,module,exports){\nmodule.exports=[{\n  \"featureType\": \"all\",\n  \"elementType\": \"labels.icon\",\n  \"stylers\": [{\n    \"visibility\": \"off\"\n  }]\n}, {\n  \"featureType\": \"water\",\n  \"elementType\": \"labels.icon\",\n  \"stylers\": [{\n    \"visibility\": \"off\"\n  }]\n}]\n},{}],17:[function(require,module,exports){\n'use strict';\n\nvar _logger = require('./logger');\n\nvar _map = require('./map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _app = require('./app');\n\nvar _app2 = _interopRequireDefault(_app);\n\nvar _location = require('./location');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Promise-ify Google map success.\n */\n/**\n * public/src/js/setup/index.js - delish\n * \n * Licensed under MIT license.\n * Copyright (C) 2017 Karim Alibhai.\n */\n\nvar mapReady = new Promise(function (resolve) {\n  window.initMap = resolve;\n});\n\n/**\n * List of tasks, in the order that they\n * must be executed.\n */\nvar tasks = {\n  order: ['Locating you', 'Creating sexy map', 'Wrapping up'],\n\n  /**\n   * Tracks down your first location. Or fails.\n   */\n  'Locating you': function LocatingYou(resolve) {\n    return (0, _location.getFirstLocation)(resolve);\n  },\n\n  /**\n   * Creates a new Google map instance\n   */\n  'Creating sexy map': function CreatingSexyMap(resolve, reject) {\n    mapReady.then(function () {\n      var map = document.createElement('div');\n      map.id = 'map';\n      document.body.insertBefore(map, document.body.children[0]);\n      (0, _map2.default)(map, resolve);\n    }).catch(reject);\n\n    var script = document.createElement('script');\n    script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyDP65fNhrgLMP9Gu20ATUn2CxwPQErxngQ&callback=initMap';\n    document.body.appendChild(script);\n  },\n\n  /**\n   * Not actually wrapping up. This brings up the app\n   * via angular.\n   */\n  'Wrapping up': (0, _app2.default)(_logger.fail)\n};\n\n/**\n * Executes tasks sequentionally.\n */\nfunction next() {\n  i += 1;\n\n  if (i === tasks.order.length) {\n    (0, _logger.log)('Okay I\\'m ready now.');\n\n    setTimeout(function () {\n      document.documentElement.classList.remove('loading');\n    }, 2000);\n  } else {\n    var text = tasks.order[i];\n    console.warn(text + ' ...');\n    (0, _logger.log)(text + ' ...');\n\n    new Promise(tasks[text]).then(next).catch(_logger.fail);\n  }\n}\n\n// start task execution, soon\nvar i = -1;\nsetTimeout(next, 0);\n\n},{\"./app\":8,\"./location\":12,\"./logger\":13,\"./map\":14}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _logger = require('./logger');\n\n// setup error handling and then expose\nvar sock = io(); /**\n                  * public/src/js/socket.js - delish\n                  * \n                  * Licensed under MIT license.\n                  * Copyright (C) 2017 Karim Alibhai.\n                  */\n/* globals io */\n\nsock.on('fail', _logger.fail);\nexports.default = sock;\n\n},{\"./logger\":13}]},{},[17])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZGVib3VuY2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZGVib3VuY2Uvbm9kZV9tb2R1bGVzL2RhdGUtbm93L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3V0aWwvbm9kZV9tb2R1bGVzL2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy91dGlsL3V0aWwuanMiLCJwdWJsaWMvc3JjL2pzL2FwcC5qcyIsInB1YmxpYy9zcmMvanMvY29udHJvbGxlcnMvbWFwLmpzIiwicHVibGljL3NyYy9qcy9jb250cm9sbGVycy9zZWFyY2guanMiLCJwdWJsaWMvc3JjL2pzL2ZhY3Rvcmllcy9zZWFyY2guanMiLCJwdWJsaWMvc3JjL2pzL2xvY2F0aW9uLmpzIiwicHVibGljL3NyYy9qcy9sb2dnZXIuanMiLCJwdWJsaWMvc3JjL2pzL21hcC9pbmRleC5qcyIsInB1YmxpYy9zcmMvanMvbWFwL29wdGlvbnMuanMiLCJwdWJsaWMvc3JjL2pzL21hcC9zdHlsZXMvaHlicmlkLmpzb24iLCJwdWJsaWMvc3JjL2pzL3NldHVwLmpzIiwicHVibGljL3NyYy9qcy9zb2NrZXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0FBWSxNQUF0QixFQUE4QjtBQUM1QixxQkFBSSxzQkFBSjs7QUFFQSxlQUFXLFlBQU07QUFDZixlQUFTLGVBQVQsQ0FBeUIsU0FBekIsQ0FBbUMsTUFBbkMsQ0FBMEMsU0FBMUM7QUFDRCxLQUZELEVBRUcsSUFGSDtBQUdELEdBTkQsTUFNTztBQUNMLFFBQUksT0FBTyxNQUFNLEtBQU4sQ0FBWSxDQUFaLENBQVg7QUFDQSxZQUFRLElBQVIsQ0FBYSxPQUFPLE1BQXBCO0FBQ0EscUJBQUksT0FBTyxNQUFYOztBQUVBLFFBQUksT0FBSixDQUFZLE1BQU0sSUFBTixDQUFaLEVBQ0csSUFESCxDQUNRLElBRFIsRUFFRyxLQUZIO0FBR0Q7QUFDRjs7QUFFRDtBQUNBLElBQUksSUFBSSxDQUFDLENBQVQ7QUFDQSxXQUFXLElBQVgsRUFBaUIsQ0FBakI7Ozs7Ozs7OztBQzNFQTs7QUFFQTtBQUNBLElBQU0sT0FBTyxJQUFiLEMsQ0FYQTs7Ozs7O0FBTUE7O0FBTUEsS0FBSyxFQUFMLENBQVEsTUFBUjtrQkFDZSxJIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBub3cgPSByZXF1aXJlKCdkYXRlLW5vdycpO1xuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3RcbiAqIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAqIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuICogbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cbiAqXG4gKiBAc291cmNlIHVuZGVyc2NvcmUuanNcbiAqIEBzZWUgaHR0cDovL3Vuc2NyaXB0YWJsZS5jb20vMjAwOS8wMy8yMC9kZWJvdW5jaW5nLWphdmFzY3JpcHQtbWV0aG9kcy9cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmN0aW9uIHRvIHdyYXBcbiAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lb3V0IGluIG1zIChgMTAwYClcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2hldGhlciB0byBleGVjdXRlIGF0IHRoZSBiZWdpbm5pbmcgKGBmYWxzZWApXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKXtcbiAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuICBpZiAobnVsbCA9PSB3YWl0KSB3YWl0ID0gMTAwO1xuXG4gIGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgIHZhciBsYXN0ID0gbm93KCkgLSB0aW1lc3RhbXA7XG5cbiAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+IDApIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgY29udGV4dCA9IHRoaXM7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICB0aW1lc3RhbXAgPSBub3coKTtcbiAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICBpZiAoY2FsbE5vdykge1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gRGF0ZS5ub3cgfHwgbm93XG5cbmZ1bmN0aW9uIG5vdygpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKClcbn1cbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cbiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fFxuICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHtcbiAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuICgnICsgZXIgKyAnKScpO1xuICAgICAgICBlcnIuY29udGV4dCA9IGVyO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBmYXN0IGNhc2VzXG4gICAgICBjYXNlIDE6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBzbG93ZXJcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBtO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG4gICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cbiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZVxuICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblxuICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgdGhpcy5vbih0eXBlLCBnKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHBvc2l0aW9uID0gLTE7XG5cbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG4gICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBrZXksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG4gICAgLy8gTElGTyBvcmRlclxuICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgfVxuICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gW107XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgZWxzZVxuICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuICByZXR1cm4gcmV0O1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuICBpZiAodGhpcy5fZXZlbnRzKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSlcbiAgICAgIHJldHVybiAxO1xuICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpXG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbn07XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNCdWZmZXIoYXJnKSB7XG4gIHJldHVybiBhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCdcbiAgICAmJiB0eXBlb2YgYXJnLmNvcHkgPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgYXJnLmZpbGwgPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgYXJnLnJlYWRVSW50OCA9PT0gJ2Z1bmN0aW9uJztcbn0iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkaiVdL2c7XG5leHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHtcbiAgaWYgKCFpc1N0cmluZyhmKSkge1xuICAgIHZhciBvYmplY3RzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7XG4gIH1cblxuICB2YXIgaSA9IDE7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG4gIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJztcbiAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4O1xuICAgIHN3aXRjaCAoeCkge1xuICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVqJzpcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfSk7XG4gIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7XG4gICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHtcbiAgICAgIHN0ciArPSAnICcgKyB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cblxuLy8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbi8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4vLyBJZiAtLW5vLWRlcHJlY2F0aW9uIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLlxuZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7XG4gIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuXG4gIGlmIChpc1VuZGVmaW5lZChnbG9iYWwucHJvY2VzcykpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59O1xuXG5cbnZhciBkZWJ1Z3MgPSB7fTtcbnZhciBkZWJ1Z0Vudmlyb247XG5leHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7XG4gIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKVxuICAgIGRlYnVnRW52aXJvbiA9IHByb2Nlc3MuZW52Lk5PREVfREVCVUcgfHwgJyc7XG4gIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuICBpZiAoIWRlYnVnc1tzZXRdKSB7XG4gICAgaWYgKG5ldyBSZWdFeHAoJ1xcXFxiJyArIHNldCArICdcXFxcYicsICdpJykudGVzdChkZWJ1Z0Vudmlyb24pKSB7XG4gICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbXNnID0gZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWJ1Z3Nbc2V0XTtcbn07XG5cblxuLyoqXG4gKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG4gKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cbiAqL1xuLyogbGVnYWN5OiBvYmosIHNob3dIaWRkZW4sIGRlcHRoLCBjb2xvcnMqL1xuZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcbiAgLy8gZGVmYXVsdCBvcHRpb25zXG4gIHZhciBjdHggPSB7XG4gICAgc2VlbjogW10sXG4gICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3JcbiAgfTtcbiAgLy8gbGVnYWN5Li4uXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTtcbiAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuICAgIC8vIGxlZ2FjeS4uLlxuICAgIGN0eC5zaG93SGlkZGVuID0gb3B0cztcbiAgfSBlbHNlIGlmIChvcHRzKSB7XG4gICAgLy8gZ290IGFuIFwib3B0aW9uc1wiIG9iamVjdFxuICAgIGV4cG9ydHMuX2V4dGVuZChjdHgsIG9wdHMpO1xuICB9XG4gIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSkgY3R4LnNob3dIaWRkZW4gPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKSBjdHguY3VzdG9tSW5zcGVjdCA9IHRydWU7XG4gIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG4gIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTtcbn1cbmV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cblxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5pbnNwZWN0LmNvbG9ycyA9IHtcbiAgJ2JvbGQnIDogWzEsIDIyXSxcbiAgJ2l0YWxpYycgOiBbMywgMjNdLFxuICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sXG4gICdpbnZlcnNlJyA6IFs3LCAyN10sXG4gICd3aGl0ZScgOiBbMzcsIDM5XSxcbiAgJ2dyZXknIDogWzkwLCAzOV0sXG4gICdibGFjaycgOiBbMzAsIDM5XSxcbiAgJ2JsdWUnIDogWzM0LCAzOV0sXG4gICdjeWFuJyA6IFszNiwgMzldLFxuICAnZ3JlZW4nIDogWzMyLCAzOV0sXG4gICdtYWdlbnRhJyA6IFszNSwgMzldLFxuICAncmVkJyA6IFszMSwgMzldLFxuICAneWVsbG93JyA6IFszMywgMzldXG59O1xuXG4vLyBEb24ndCB1c2UgJ2JsdWUnIG5vdCB2aXNpYmxlIG9uIGNtZC5leGVcbmluc3BlY3Quc3R5bGVzID0ge1xuICAnc3BlY2lhbCc6ICdjeWFuJyxcbiAgJ251bWJlcic6ICd5ZWxsb3cnLFxuICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuICAndW5kZWZpbmVkJzogJ2dyZXknLFxuICAnbnVsbCc6ICdib2xkJyxcbiAgJ3N0cmluZyc6ICdncmVlbicsXG4gICdkYXRlJzogJ21hZ2VudGEnLFxuICAvLyBcIm5hbWVcIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZ1xuICAncmVnZXhwJzogJ3JlZCdcbn07XG5cblxuZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdO1xuXG4gIGlmIChzdHlsZSkge1xuICAgIHJldHVybiAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzBdICsgJ20nICsgc3RyICtcbiAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG5cblxuZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgcmV0dXJuIHN0cjtcbn1cblxuXG5mdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuICB2YXIgaGFzaCA9IHt9O1xuXG4gIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcbiAgICBoYXNoW3ZhbF0gPSB0cnVlO1xuICB9KTtcblxuICByZXR1cm4gaGFzaDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHtcbiAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcbiAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmXG4gICAgICB2YWx1ZSAmJlxuICAgICAgaXNGdW5jdGlvbih2YWx1ZS5pbnNwZWN0KSAmJlxuICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG4gICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcbiAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLlxuICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcbiAgICBpZiAoIWlzU3RyaW5nKHJldCkpIHtcbiAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXNcbiAgdmFyIHByaW1pdGl2ZSA9IGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKTtcbiAgaWYgKHByaW1pdGl2ZSkge1xuICAgIHJldHVybiBwcmltaXRpdmU7XG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblxuICBpZiAoY3R4LnNob3dIaWRkZW4pIHtcbiAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICB9XG5cbiAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweFxuICBpZiAoaXNFcnJvcih2YWx1ZSlcbiAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfVxuICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXG4gIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXJyYXkgPSB0cnVlO1xuICAgIGJyYWNlcyA9IFsnWycsICddJ107XG4gIH1cblxuICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJztcbiAgfVxuXG4gIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG4gIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3JcbiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuICB9XG5cbiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cblxuICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblxuICB2YXIgb3V0cHV0O1xuICBpZiAoYXJyYXkpIHtcbiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGN0eC5zZWVuLnBvcCgpO1xuXG4gIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcbiAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcbiAgfVxuICBpZiAoaXNOdW1iZXIodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG4gIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuICAvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgXCJvYmplY3RcIiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuXG4gIGlmIChpc051bGwodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5wdXNoKCcnKTtcbiAgICB9XG4gIH1cbiAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBrZXksIHRydWUpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcbiAgdmFyIG5hbWUsIHN0ciwgZGVzYztcbiAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgeyB2YWx1ZTogdmFsdWVba2V5XSB9O1xuICBpZiAoZGVzYy5nZXQpIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmICghaGFzT3duUHJvcGVydHkodmlzaWJsZUtleXMsIGtleSkpIHtcbiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuICB9XG4gIGlmICghc3RyKSB7XG4gICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG4gICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcbiAgICAgICAgaWYgKGFycmF5KSB7XG4gICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcbiAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTtcbiAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7XG59XG5cblxuZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcbiAgdmFyIG51bUxpbmVzRXN0ID0gMDtcbiAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7XG4gICAgbnVtTGluZXNFc3QrKztcbiAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG4gICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csICcnKS5sZW5ndGggKyAxO1xuICB9LCAwKTtcblxuICBpZiAobGVuZ3RoID4gNjApIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICtcbiAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIG91dHB1dC5qb2luKCcsXFxuICAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIGJyYWNlc1sxXTtcbiAgfVxuXG4gIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07XG59XG5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cbmZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5leHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXG5mdW5jdGlvbiBpc0Vycm9yKGUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG4gICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSByZXF1aXJlKCcuL3N1cHBvcnQvaXNCdWZmZXInKTtcblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5cbmZ1bmN0aW9uIHBhZChuKSB7XG4gIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuLnRvU3RyaW5nKDEwKSA6IG4udG9TdHJpbmcoMTApO1xufVxuXG5cbnZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJyxcbiAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cbi8vIDI2IEZlYiAxNjoxOTozNFxuZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCc6Jyk7XG4gIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7XG59XG5cblxuLy8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7XG59O1xuXG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcbiAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZFxuICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmVcbiAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuICogICAgIHByb3RvdHlwZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLlxuICovXG5leHBvcnRzLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuZXhwb3J0cy5fZXh0ZW5kID0gZnVuY3Rpb24ob3JpZ2luLCBhZGQpIHtcbiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIG9yaWdpbjtcbn07XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG4iLCIvKipcbiAqIHB1YmxpYy9zcmMvanMvYXBwLmpzIC0gZGVsaXNoXG4gKiBcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlLlxuICogQ29weXJpZ2h0IChDKSAyMDE3IEthcmltIEFsaWJoYWkuXG4gKi9cbi8qIGdsb2JhbHMgYW5ndWxhciAqL1xuXG5pbXBvcnQgTWFwQ3RsIGZyb20gJy4vY29udHJvbGxlcnMvbWFwJ1xuaW1wb3J0IFNlYXJjaEN0bCBmcm9tICcuL2NvbnRyb2xsZXJzL3NlYXJjaCdcbmltcG9ydCBTZWFyY2hQYXJhbXMgZnJvbSAnLi9mYWN0b3JpZXMvc2VhcmNoJ1xuXG5leHBvcnQgZGVmYXVsdCBleGNlcHRpb25IYW5kbGVyID0+IChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnZGVsaXNoJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZSddKVxuXG4gICAgYXBwLmZhY3RvcnkoJyRleGNlcHRpb25IYW5kbGVyJywgKCkgPT4gZXhjZXB0aW9uSGFuZGxlcilcbiAgICBhcHAuZmFjdG9yeSgnJHNlYXJjaFBhcmFtcycsIFNlYXJjaFBhcmFtcylcblxuICAgIGFwcC5jb25maWcoWyckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsICgkcm91dGVyLCAkbG9jYXRpb24pID0+IHtcbiAgICAgICRyb3V0ZXIub3RoZXJ3aXNlKCcvJylcbiAgICAgICRsb2NhdGlvbi5odG1sNU1vZGUodHJ1ZSlcbiAgICB9XSlcblxuICAgIGFwcC5jb250cm9sbGVyKCdNYXBDdGwnLCBNYXBDdGwocmVzb2x2ZSkpXG4gICAgYXBwLmNvbnRyb2xsZXIoJ1NlYXJjaEN0bCcsIFNlYXJjaEN0bClcblxuICAgIGFuZ3VsYXIuZWxlbWVudCgoKSA9PiBhbmd1bGFyLmJvb3RzdHJhcChkb2N1bWVudCwgWydkZWxpc2gnXSkpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlamVjdChlcnIpXG4gIH1cbn0iLCIvKipcbiAqIHB1YmxpYy9zcmMvanMvY29udHJvbGxlcnMvbWFwLmpzIC0gZGVsaXNoXG4gKiBcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlLlxuICogQ29weXJpZ2h0IChDKSAyMDE3IEthcmltIEFsaWJoYWkuXG4gKi9cblxuaW1wb3J0IHNvY2sgZnJvbSAnLi4vc29ja2V0J1xuaW1wb3J0IGRlYm91bmNlIGZyb20gJ2RlYm91bmNlJ1xuaW1wb3J0IHsgZ2V0Rmlyc3RMb2NhdGlvbiB9IGZyb20gJy4uL2xvY2F0aW9uJ1xuaW1wb3J0IHsgZ2V0TWFwV2hlblJlYWR5LCBnZXRNYXAgfSBmcm9tICcuLi9tYXAnXG5cbmV4cG9ydCBkZWZhdWx0IHJlYWR5ID0+IFsoKSA9PiB7XG4gIC8qKlxuICAgKiBFeGVjdXRlcyBhIG5lYXJieSBzZWFyY2ggdXNpbmcgcGFyYW1zLlxuICAgKiBAcGFyYW0ge0xhdExuZ0xpdGVyYWx9IGxhdGxuZyBhbiBvYmplY3QgbGl0ZXJhbCB3aXRoIGxhdGl0dXRkZSBhbmQgbG9uZ2l0dWRlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBsYXRsbmcubGF0IHRoZSBsYXRpdHVkZSBvZiB0aGUgbGl0ZXJhbFxuICAgKiBAcGFyYW0ge051bWJlcn0gbGF0bG5nLmxuZyB0aGUgbG9uZ2l0dWRlIG9mIHRoZSBsaXRlcmFsXG4gICAqL1xuICBjb25zdCBnZXROZWFyYnkgPSBkZWJvdW5jZSgoKSA9PiB7XG4gICAgY29uc3QgeyBsYXQsIGxuZyB9ID0gZ2V0TWFwKCkuY2VudGVyKClcblxuICAgIHNvY2suZW1pdCgnbmVhcmJ5Jywge1xuICAgICAgbGF0LFxuICAgICAgbG5nLFxuICAgICAgcmFkaXVzOiBnZXRNYXAoKS5yYWRpdXMoKVxuICAgIH0pXG4gIH0sIDMwMClcblxuICAvKipcbiAgICogSGFuZGxlIG5lYXJieSBzZWFyY2ggcmVzdWx0cy5cbiAgICovXG4gIHNvY2sub24oJ25lYXJieTpyZXN1bHRzJywgcmVzdWx0cyA9PlxuICAgIHJlc3VsdHMubWFwKHNwb3QgPT4gZ2V0TWFwKCkucGxvdChzcG90KSlcbiAgKVxuXG4gIC8qKlxuICAgKiBBdHRhY2ggdGhlIG1hcmtlciBtYXBwaW5nIGZ1bmN0aW9uIHRvIGNoYW5nZXMgaW5cbiAgICogdGhlIG1hcCdzIHBvc2l0aW9uLlxuICAgKi9cbiAgZ2V0TWFwKClcbiAgICAub24oJ3pvb21fY2hhbmdlZCcsIGdldE5lYXJieSlcbiAgICAub24oJ2RyYWdlbmQnLCBnZXROZWFyYnkpXG5cbiAgLy8gaW5pdCB0aGUgbWFwXG4gIGdldEZpcnN0TG9jYXRpb24oKCkgPT5cbiAgICBnZXRNYXBXaGVuUmVhZHkoKCkgPT4ge1xuICAgICAgcmVhZHkoKVxuICAgICAgc2V0VGltZW91dChnZXROZWFyYnksIDApXG4gICAgfSlcbiAgKVxufV0iLCIvKipcbiAqIHB1YmxpYy9zcmMvanMvY29udHJvbGxlcnMvc2VhcmNoLmpzIC0gZGVsaXNoXG4gKiBcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlLlxuICogQ29weXJpZ2h0IChDKSAyMDE3IEthcmltIEFsaWJoYWkuXG4gKi9cblxuaW1wb3J0IHNvY2sgZnJvbSAnLi4vc29ja2V0J1xuaW1wb3J0IGRlYm91bmNlIGZyb20gJ2RlYm91bmNlJ1xuaW1wb3J0IHsgZ2V0Q3VycmVudExvY2F0aW9uIH0gZnJvbSAnLi4vbG9jYXRpb24nXG5pbXBvcnQgeyBnZXRNYXAgfSBmcm9tICcuLi9tYXAnXG5cbmV4cG9ydCBkZWZhdWx0IFsnJHNjb3BlJywgKCRzY29wZSkgPT4ge1xuICAkc2NvcGUuc2VhcmNoID0gZGVib3VuY2UocXVlcnkgPT4ge1xuICAgIGlmICghcXVlcnkpIHtcbiAgICAgICRzY29wZS5oaW50ID0gJydcbiAgICAgIHJldHVybiAkc2NvcGUuJGFwcGx5KClcbiAgICB9XG5cbiAgICBsZXQgeyBsYXQsIGxuZyB9ID0gZ2V0Q3VycmVudExvY2F0aW9uKClcblxuICAgIHNvY2suZW1pdCgnYXV0b2NvbXBsZXRlJywge1xuICAgICAgcXVlcnksXG4gICAgICBsYXQsXG4gICAgICBsbmcsXG4gICAgICByYWRpdXM6IGdldE1hcCgpLnJhZGl1cygpXG4gICAgfSlcbiAgfSwgNTAwKVxuXG4gICRzY29wZS5wcmVkaWN0aW9uID0gKCkgPT4ge1xuICAgIHJldHVybiAkc2NvcGUuaGludCAmJiAkc2NvcGUucXVlcnkgPyAkc2NvcGUucXVlcnkgKyAkc2NvcGUuaGludC5zdWJzdHIoJHNjb3BlLnF1ZXJ5Lmxlbmd0aCkgOiAnJ1xuICB9XG5cbiAgJHNjb3BlLmNvbXBsZXRlID0gZXZ0ID0+IHtcbiAgICBpZiAoZXZ0LndoaWNoID09PSAzOSkge1xuICAgICAgJHNjb3BlLnF1ZXJ5ID0gJHNjb3BlLnByZWRpY3Rpb24oKVxuICAgIH1cbiAgfVxuXG4gIHNvY2sub24oJ2F1dG9jb21wbGV0ZTpyZXN1bHRzJywgcmVzdWx0ID0+IHtcbiAgICAkc2NvcGUuaGludCA9IHJlc3VsdFxuICAgICRzY29wZS4kYXBwbHkoKVxuICB9KVxufV0iLCIvKipcbiAqIHB1YmxpYy9zcmMvanMvZmFjdG9yaWVzL3NlYXJjaC5qcyAtIGRlbGlzaFxuICogXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZS5cbiAqIENvcHlyaWdodCAoQykgMjAxNyBLYXJpbSBBbGliaGFpLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0ICgpID0+IHtcbiAgY29uc3QgcGFyYW1zID0ge31cbiAgcmV0dXJuIHBhcmFtc1xufVxuXG4vKipcbiAqIFR5cGUgYW5kIG9wdGlvbiBpbmZvcm1hdGlvbiBmb3IgZWFjaCBzZWFyY2ggcGFyYW1ldGVyXG4gKiBmb3IgdmlldyBjb25zdHJ1Y3Rpb24uXG4gKi9cbmV4cG9ydCBjb25zdCBQYXJhbVR5cGVzID0ge30iLCIvKipcbiAqIHB1YmxpYy9zcmMvanMvbG9jYXRpb24uanMgLSBkZWxpc2hcbiAqIFxuICogTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2UuXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgS2FyaW0gQWxpYmhhaS5cbiAqL1xuXG5pbXBvcnQgeyBmYWlsIH0gZnJvbSAnLi9sb2dnZXInXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnXG5cbmNvbnN0IGxvY0VtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKClcbmNvbnN0IGxvY2F0aW9uID0ge31cblxubmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24ocG9zID0+IHtcbiAgbG9jYXRpb24ubGF0ID0gcG9zLmNvb3Jkcy5sYXRpdHVkZVxuICBsb2NhdGlvbi5sbmcgPSBwb3MuY29vcmRzLmxvbmdpdHVkZVxuXG4gIGxvY0VtaXR0ZXIuZW1pdCgndXBkYXRlJywgZ2V0Q3VycmVudExvY2F0aW9uKCkpXG59LCBmYWlsLCB7XG4gIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZVxufSlcblxuLyoqXG4gKiBAcmV0dXJucyB7TGF0TG5nfSBhIGNvcHkgb2YgdGhlIHVzZXIncyBjdXJyZW50IGxvY2F0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50TG9jYXRpb24gPSAoKSA9PiBPYmplY3QuYXNzaWduKHt9LCBsb2NhdGlvbilcblxuLyoqXG4gKiBHZXQgdGhlIGZpcnN0IGF2YWlsYWJsZSBsb2NhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpcnN0TG9jYXRpb24oZG9uZSkge1xuICBpZiAobG9jYXRpb24ubGF0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IGdldEZpcnN0TG9jYXRpb24oZG9uZSksIDApXG4gIH0gZWxzZSB7XG4gICAgZG9uZShnZXRDdXJyZW50TG9jYXRpb24oKSlcbiAgfVxufVxuXG4vKipcbiAqIEF0dGFjaGVzIGFuIGV2ZW50IGhhbmRsZXIgdG8gbG9jYXRpb24gdXBkYXRlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIGFuIGV2ZW50IGhhbmRsZXIgZm9yIGxvY2F0aW9uIHVwZGF0ZXNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldExvY2F0aW9uQWx3YXlzID0gY2FsbGJhY2sgPT4gbG9jRW1pdHRlci5vbigndXBkYXRlJywgY2FsbGJhY2spIiwiLyoqXG4gKiBwdWJsaWMvc3JjL2pzL2xvZ2dlci5qcyAtIGRlbGlzaFxuICogXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZS5cbiAqIENvcHlyaWdodCAoQykgMjAxNyBLYXJpbSBBbGliaGFpLlxuICovXG4vKiBnbG9iYWxzICQsIHRyYWNrSnMgKi9cblxuY29uc3QgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKVxuXG5sZXQgY3VycmVudExvZyA9ICQoJy5sZWFkOmVxKDApJylcbiAgLCBuZXh0TG9nID0gJCgnLmxlYWQubmV4dCcpXG4gICwgYXBwSGFzRmFpbGVkID0gZmFsc2VcbiAgLCBsb2dJblByb2dyZXNzID0gZmFsc2VcblxuLyoqXG4gKiBBY3R1YWwgbG9nZ2VyLlxuICovXG5jb25zdCBfbG9nID0gZnVuY3Rpb24gKCkge1xuICBpZiAobG9nSW5Qcm9ncmVzcykgcmV0dXJuO1xuICBsb2dJblByb2dyZXNzID0gdHJ1ZVxuXG4gIGxldCB0ZXh0ID0gdXRpbC5mb3JtYXQuYXBwbHkodXRpbCwgYXJndW1lbnRzKVxuXG4gIC8vIGVuc3VyZSB0aGF0IGRvbSBpcyByZWFkeVxuICBpZiAoTWF0aC5taW4oY3VycmVudExvZy5sZW5ndGgsIG5leHRMb2cubGVuZ3RoKSA9PT0gMCkge1xuICAgIGN1cnJlbnRMb2cgPSAkKCcubGVhZDplcSgwKScpXG4gICAgbmV4dExvZyA9ICQoJy5sZWFkLm5leHQnKVxuXG4gICAgaWYgKE1hdGgubWluKGN1cnJlbnRMb2cubGVuZ3RoLCBuZXh0TG9nLmxlbmd0aCkgPT09IDApIHtcbiAgICAgIGxvZ0luUHJvZ3Jlc3MgPSBmYWxzZVxuICAgICAgcmV0dXJuICQoKCkgPT4gX2xvZyh0ZXh0KSlcbiAgICB9XG4gIH1cblxuICAvLyB0cmFuc2l0aW9uIHRvIHRoZSBuZXcgbG9nXG4gIG5leHRMb2cudGV4dCh0ZXh0KVxuICBjdXJyZW50TG9nLmFkZENsYXNzKCdoaWRlJylcbiAgbmV4dExvZy5yZW1vdmVDbGFzcygnbmV4dCcpXG5cbiAgLy8gYWZ0ZXIgdGhlIENTUyB0cmFuc2l0aW9uIGNvbXBsZXRlcywgc3dhcFxuICAvLyB0aGUgbG9nIGVsZW1lbnRzIG91dFxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBsZXQgcGFyZW50ID0gY3VycmVudExvZy5wYXJlbnQoKVxuICAgIGN1cnJlbnRMb2cucmVtb3ZlKClcbiAgICBjdXJyZW50TG9nID0gbmV4dExvZ1xuXG4gICAgbmV4dExvZyA9ICQoJzxwIGNsYXNzPVwibGVhZCBuZXh0XCI+PC9wPicpXG4gICAgcGFyZW50LmFwcGVuZChuZXh0TG9nKVxuXG4gICAgbG9nSW5Qcm9ncmVzcyA9IGZhbHNlXG4gIH0sIDcwMClcblxuICAvLyByZXR1cm4gcmVmZXJlbmNlIHRvIHRoZSBsb2cgZWxlbWVudCB1c2VkXG4gIHJldHVybiBuZXh0TG9nXG59XG5cbi8qKlxuICogTG9ncyB3aGVuIGN1cnJlbnQgbG9nIGlzIGRvbmUuXG4gKi9cbmZ1bmN0aW9uIGxvZ0xhdGVyKGRvbmUpIHtcbiAgY29uc3QgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKVxuXG4gIGlmIChNYXRoLm1pbihjdXJyZW50TG9nLmxlbmd0aCwgbmV4dExvZy5sZW5ndGgpID09PSAwKSB7XG4gICAgY3VycmVudExvZyA9ICQoJy5sZWFkOmVxKDApJylcbiAgICBuZXh0TG9nID0gJCgnLmxlYWQubmV4dCcpXG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IGxvZ0xhdGVyLmFwcGx5KHRoaXMsIGFyZ3MpLCAwKVxuICB9IGVsc2UgaWYgKGxvZ0luUHJvZ3Jlc3MpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IGxvZ0xhdGVyLmFwcGx5KHRoaXMsIGFyZ3MpLCAwKVxuICB9IGVsc2Uge1xuICAgIGRvbmUoX2xvZy5hcHBseSh0aGlzLCBhcmdzLnNsaWNlKDEpKSlcbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgbG9nIHN0YXR1cy5cbiAqIEBwYXJhbSB7P0Z1bmN0aW9ufSBkb25lIGEgY2FsbGJhY2sgdG8gZXhlY3V0ZSBpZiB0aGUgbG9nIGhhcHBlbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIHRoZSBzdHJpbmcgd2l0aCBmb3JtYXR0aW5nXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gdmFsdWVzIGFueSB2YWx1ZXMgdG8gcGx1ZyBpblxuICovXG5leHBvcnQgY29uc3QgbG9nID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIWFwcEhhc0ZhaWxlZCkge1xuICAgIHJldHVybiBfbG9nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgfVxufVxuXG4vKipcbiAqIERpc3BsYXlzIHRoZSBlcnJvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZhaWxPbmNlKCkge1xuICBpZiAoYXBwSGFzRmFpbGVkKSByZXR1cm47XG4gIGFwcEhhc0ZhaWxlZCA9IHRydWVcbiAgJCgnaHRtbCcpLmFkZENsYXNzKCdlcnJvcicpXG5cbiAgbG9nTGF0ZXIobG9nRWxtID0+XG4gICAgbG9nRWxtLmFkZENsYXNzKCdlcnJvci1tc2cnKVxuICAgICAgICAgIC5hZGRDbGFzcygnY29sLTgnKVxuICAgICAgICAgIC5hZGRDbGFzcygnb2Zmc2V0LTInKVxuICAsICdUaGluZ3MgaGF2ZSBnb25lIGhvcnJpYmx5IHdyb25nLiBJIHRoaW5rIHlvdXIgY29tcHV0ZXIgaXMgZ29pbmcgdG8gZXhwbG9kZS4gQnV0IHdoYXQgZG8gSSBrbm93LCBJXFwnbSBqdXN0IGFuIGVycm9yIG1lc3NhZ2UuJylcbn1cblxuLyoqXG4gKiBIYW5kbGUgdGFzayBmYWlsdXJlLlxuICovXG5leHBvcnQgY29uc3QgZmFpbCA9IGVyciA9PiB0cmFja0pzLnRyYWNrKGVycikiLCIvKipcbiAqIHB1YmxpYy9zcmMvanMvbWFwLmpzIC0gZGVsaXNoXG4gKiBcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlLlxuICogQ29weXJpZ2h0IChDKSAyMDE3IEthcmltIEFsaWJoYWkuXG4gKi9cbi8qIGdsb2JhbHMgZ29vZ2xlICovXG5cbmltcG9ydCBNYXBPcHRpb25zIGZyb20gJy4vb3B0aW9ucydcbmltcG9ydCB7IGdldEZpcnN0TG9jYXRpb24sIGdldExvY2F0aW9uQWx3YXlzIH0gZnJvbSAnLi4vbG9jYXRpb24nXG5cbi8qKlxuICogR2V0cyB0aGUgZGlzdGFuY2UgKGluIG1ldGVycykgYmV0d2VlbiB0d28gcG9pbnRzIG9uIGEgbWFwLiAoU291cmNlOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMTE3MjY4NSlcbiAqIEBwYXJhbSB7TGF0TG5nfSBzdGFydCBvbmUgb2YgdGhlIHR3byBwb2ludHNcbiAqIEBwYXJhbSB7TGF0TG5nfSBlbmQgdGhlIG90aGVyIHBvaW50XG4gKiBAcmV0dXJucyB7TnVtYmVyfSB0aGUgZGlzdGFuY2UgYmV0d2VlbiBzdGFydCBhbmQgZW5kXG4gKi9cbmZ1bmN0aW9uIGdldERpc3RhbmNlKHsgbGF0OiBsYXQxLCBsbmc6IGxvbjEgfSwgeyBsYXQ6IGxhdDIsIGxuZzogbG9uMiB9KSB7XG4gIHZhciBSID0gNjM3OC4xMzdcbiAgICAsIGRMYXQgPSBsYXQyICogTWF0aC5QSSAvIDE4MCAtIGxhdDEgKiBNYXRoLlBJIC8gMTgwXG4gICAgLCBkTG9uID0gbG9uMiAqIE1hdGguUEkgLyAxODAgLSBsb24xICogTWF0aC5QSSAvIDE4MFxuICAgICwgYSA9IE1hdGguc2luKGRMYXQgLyAyKSAqIE1hdGguc2luKGRMYXQgLyAyKSArXG4gICAgICAgICAgTWF0aC5jb3MobGF0MSAqIE1hdGguUEkgLyAxODApICogTWF0aC5jb3MobGF0MiAqIE1hdGguUEkgLyAxODApICpcbiAgICAgICAgICBNYXRoLnNpbihkTG9uIC8gMikgKiBNYXRoLnNpbihkTG9uIC8gMilcbiAgICAsIGMgPSAyICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxIC0gYSkpXG5cbiAgcmV0dXJuIFIgKiBjICogMTAwMFxufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgTGF0TG5nIG9iamVjdCBmcm9tIGEgbWFwIHRvIGEgbGl0ZXJhbC5cbiAqIEBwYXJhbSB7TGF0TG5nfSBsYXRsbmcgYSBwcm9wZXIgTGF0TG5nIG9iamVjdCBmcm9tIHRoZSBnb29nbGUgbWFwIEFQSVxuICogQHJldHVybnMge0xhdExuZ0xpdGVyYWx9IHRoZSBzaW1wbGlmaWVkIExhdExuZ0xpdGVyYWwgb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIHNpbXBsZUxhdExuZyhsYXRsbmcpIHtcbiAgcmV0dXJuIHtcbiAgICBsYXQ6IGxhdGxuZy5sYXQoKSxcbiAgICBsbmc6IGxhdGxuZy5sbmcoKVxuICB9XG59XG5cbi8qKlxuICogQHJldHVybnMge1N0cmluZ30gdGhlIHVuaXF1ZSBJRCBvZiB0aGlzIHNwb3RcbiAqL1xuY29uc3Qgc3BvdElEID0gc3BvdCA9PlxuICBbXG4gICAgc3BvdC5uYW1lLFxuICAgIHNwb3QuZ2VvbWV0cnkubG9jYXRpb24ubGF0LFxuICAgIHNwb3QuZ2VvbWV0cnkubG9jYXRpb24ubG5nXG4gIF0uam9pbignLCcpXG5cbi8qKlxuICogTWFya2VyIHdyYXBwZXIgZm9yIG1hbmlwdWxhdGluZyB0aGUgbWFya2VyLlxuICovXG5jbGFzcyBTcG90IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgU3BvdCBpbnN0YW5jZS5cbiAgICogQHBhcmFtIHtTcG90fSBzcG90IHRoZSBzZWFyY2ggcmVzdWx0IHRvIHBsb3RcbiAgICogQHBhcmFtIHtNYXB9IG1hcCB0aGUgR29vZ2xlIE1hcCBpbnN0YW5jZSB0byBwbG90IG9uXG4gICAqL1xuICBjb25zdHJ1Y3RvciAoc3BvdCwgbWFwKSB7XG4gICAgdGhpcy5tYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgIHBvc2l0aW9uOiBzcG90Lmdlb21ldHJ5LmxvY2F0aW9uLFxuICAgICAgbWFwLFxuICAgICAgdGl0bGU6IHNwb3QubmFtZSxcbiAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkRST1BcbiAgICB9KVxuICB9XG59XG5cbi8qKlxuICogTWFwIHdyYXBwZXIuIEZvciBlYXNpZXIgaGFuZGxpbmcuXG4gKi9cbmNsYXNzIE1hcCB7XG4gIGNvbnN0cnVjdG9yIChlbG0sIHJlYWR5KSB7XG4gICAgdGhpcy5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGVsbSwgTWFwT3B0aW9ucylcbiAgICB0aGlzLnNwb3RzID0ge31cblxuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZSh0aGlzLm1hcCwgJ2JvdW5kc19jaGFuZ2VkJywgcmVhZHkpXG4gICAgZ2V0Rmlyc3RMb2NhdGlvbihwb3MgPT4ge1xuICAgICAgdGhpcy5jZW50ZXIocG9zLmxhdCwgcG9zLmxuZylcbiAgICAgIHRoaXMueW91ID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgIHBvc2l0aW9uOiBwb3MsXG4gICAgICAgIG1hcDogdGhpcy5tYXAsXG4gICAgICAgIHRpdGxlOiAnVGhpcyBpcyB5b3UuIERvblxcJ3QgY2xpY2sgeW91LicsXG4gICAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkRST1AsXG4gICAgICAgIGljb246IHtcbiAgICAgICAgICB1cmw6ICcvZGlzdC9pbWcveW91LnBuZycsXG4gICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoNTQuOTI1MzczMTIsIDY0KSxcbiAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSg1NC45MjUzNzMxMiwgNjQpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGdldExvY2F0aW9uQWx3YXlzKHBvcyA9PiB7XG4gICAgICAgIHRoaXMueW91LnNldFBvc2l0aW9uKHBvcylcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBDZW50ZXJzIHRoZSBtYXAuXG4gICAqIFxuICAgKiBAcGFyYW0ge251bWJlcn0gbGF0IHRoZSBsYXRpdHVkZSBvZiB0aGUgY2VudGVyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsbmcgdGhlIGxvbmdpdHVkZSBvZiB0aGUgY2VudGVyXG4gICAqIEByZXR1cm5zIHtNYXB9IGN1cnJlbnQgb2JqZWN0IGZvciBjaGFpbmluZ1xuICAgKi9cbiAgY2VudGVyIChsYXQsIGxuZykge1xuICAgIGlmIChsYXQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHNpbXBsZUxhdExuZyh0aGlzLm1hcC5nZXRDZW50ZXIoKSlcblxuICAgIHRoaXMubWFwLnNldENlbnRlcih7IGxhdCwgbG5nIH0pXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7TnVtYmVyfSB0aGUgY3VycmVudCB6b29tIGxldmVsXG4gICAqL1xuICB6b29tICgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuZ2V0Wm9vbSgpXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdmlld2FibGUgcmFkaXVzIG9mIHRoaXMgbWFwLlxuICAgKiBAcmV0dXJucyB7TnVtYmVyfSB0aGUgdmlld2FibGUgcmFkaXVzIGluIG1ldGVyc1xuICAgKi9cbiAgcmFkaXVzICgpIHtcbiAgICByZXR1cm4gZ2V0RGlzdGFuY2UoXG4gICAgICBzaW1wbGVMYXRMbmcodGhpcy5tYXAuZ2V0Q2VudGVyKCkpLFxuICAgICAgc2ltcGxlTGF0TG5nKHRoaXMubWFwLmdldEJvdW5kcygpLmdldE5vcnRoRWFzdCgpKVxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuZCBwbG90cyBhIG5ldyBzcG90IG9uIHRoZSBtYXAuXG4gICAqIFxuICAgKiBAcGFyYW0ge09iamVjdH0gc3BvdCBhIHNlYXJjaCByZXN1bHQgZm9yIG5lYXJieSByZXN0YXVyYW50c1xuICAgKiBAcmV0dXJucyB7U3BvdH0gYSBuZXcgc3BvdCBpbnN0YW5jZVxuICAgKi9cbiAgcGxvdCAoc3BvdCkge1xuICAgIGxldCBpZCA9IHNwb3RJRChzcG90KVxuXG4gICAgaWYgKCF0aGlzLnNwb3RzLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgICAgdGhpcy5zcG90c1tpZF0gPSBuZXcgU3BvdChzcG90LCB0aGlzLm1hcClcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zcG90c1tpZF1cbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRhY2hzIGEgY2FsbGJhY2sgdG8gYW4gZXZlbnQuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCB0aGUgbmFtZSBvZiB0aGUgZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciB0aGUgY2FsbGJhY2sgdG8gaGFuZGxlIHRoZSBldmVudFxuICAgKiBAcmV0dXJucyB7TWFwfSB0aGUgY3VycmVudCBvYmplY3QgZm9yIGNoYWluaW5nXG4gICAqL1xuICBvbiAoZXZlbnQsIGhhbmRsZXIpIHtcbiAgICB0aGlzLm1hcC5hZGRMaXN0ZW5lcihldmVudCwgaGFuZGxlcilcbiAgICByZXR1cm4gdGhpc1xuICB9XG59XG5cbmxldCBtYXBcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hcCBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsbSBhbiBIVE1MIGVsZW1lbnQgdG8gdXNlIGFzIHRoZSBtYXBcbiAqIEByZXR1cm5zIHtNYXB9IGEgbmV3IG1hcCBpbnN0YW5jZVxuICovXG5leHBvcnQgZGVmYXVsdCAoZWxtLCByZWFkeSkgPT4gKG1hcCA9IG5ldyBNYXAoZWxtLCByZWFkeSkpXG5cbi8qKlxuICogR2V0cyB0aGUgY3VycmVudCBtYXAgaW5zdGFuY2UuXG4gKiBAcmV0dXJucyB7TWFwfSB0aGUgc2F2ZWQgbWFwIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRNYXAgPSAoKSA9PiBtYXBcblxuLyoqXG4gKiBHZXRzIHRoZSBtYXAgaW5zdGFuY2UsIGlmIHJlYWR5LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZG9uZSBjYWxsYmFjayB0byBjYWxsIHdoZW4gbWFwIGJlY29tZXMgcmVhZHlcbiAqL1xuZXhwb3J0IGNvbnN0IGdldE1hcFdoZW5SZWFkeSA9IGRvbmUgPT4ge1xuICBpZiAobWFwKSBkb25lKG1hcClcbiAgZWxzZSBzZXRUaW1lb3V0KCgpID0+IGdldE1hcFdoZW5SZWFkeShkb25lKSwgMClcbn0iLCIvKipcbiAqIHB1YmxpYy9zcmMvanMvbWFwL29wdGlvbnMuanMgLSBkZWxpc2hcbiAqIFxuICogTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2UuXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgS2FyaW0gQWxpYmhhaS5cbiAqL1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiBEZWZhdWx0IHpvb20gb2YgMTYgYWxsb3dzIHVzZXIgdG8gc2VlIHN0cmVldHMuXG4gICAqL1xuICB6b29tOiAxOCxcblxuICAvKipcbiAgICogRnVydGhlciB0aGFuIDE0IHNob3dzIG1vcmUgdGhhbiBqdXN0IHRoZSBjdXJyZW50XG4gICAqIGNpdHkgdHlwaWNhbGx5LCBzbyBpdCdzIHVzZWxlc3MgdG8gdGhlIGFwcGxpY2F0aW9uLlxuICAgKi9cbiAgbWluWm9vbTogMTQsXG5cbiAgLyoqXG4gICAqIFNlZSBzdHlsZXMgZmlsZSBmb3IgaW5mbyBvbiBzdHlsZXMuXG4gICAqL1xuICBzdHlsZXM6IHJlcXVpcmUoJy4vc3R5bGVzL2h5YnJpZCcpLFxuXG4gIC8qKlxuICAgKiBUaGUgY29tYmluYXRpb24gb2YgdGhlc2UgdHdvIHByb3BlcnRpZXMgYWxsb3dzXG4gICAqIGEgbXVjaCBtb3JlIGludGVyZXN0aW5nIHZpZXcuXG4gICAqL1xuICBtYXBUeXBlSWQ6ICdoeWJyaWQnLFxuICB0aWx0OiA0NSxcblxuICAvKipcbiAgICogR2V0cyByaWQgb2YgdGhlIFVJIHByb3ZpZGVkIGJ5IEdvb2dsZSBNYXBzLCB3aXRoXG4gICAqIHRoZSBleGNlcHRpb24gb2YgdGhlaXIgdGVybXMgb2YgdXNlIGFuZCBsb2dvLlxuICAgKi9cbiAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSxcblxuICAvKipcbiAgICogV2Ugd2FudCBjdXN0b20gd2luZG93cyBmb3IgbWFya2Vycy5cbiAgICovXG4gIGNsaWNrYWJsZUljb25zOiBmYWxzZSxcblxuICAvKipcbiAgICogVGhlIHpvb20gY29udHJvbCBpcyBhIG5pY2UgcGFydCBvZiB0aGUgVUksIGl0IGhlbHBzXG4gICAqIHVzZXJzIGNvbnRyb2wgdGhlIHpvb20gaW4gbW9yZSB3YXlzIHRoYW4ganVzdCBieSB1c2luZ1xuICAgKiB0aGVpciBtb3VzZSAmIHNjcm9sbC5cbiAgICovXG4gIHpvb21Db250cm9sOiB0cnVlXG59IiwibW9kdWxlLmV4cG9ydHM9W3tcbiAgXCJmZWF0dXJlVHlwZVwiOiBcImFsbFwiLFxuICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLmljb25cIixcbiAgXCJzdHlsZXJzXCI6IFt7XG4gICAgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcbiAgfV1cbn0sIHtcbiAgXCJmZWF0dXJlVHlwZVwiOiBcIndhdGVyXCIsXG4gIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMuaWNvblwiLFxuICBcInN0eWxlcnNcIjogW3tcbiAgICBcInZpc2liaWxpdHlcIjogXCJvZmZcIlxuICB9XVxufV0iLCIvKipcbiAqIHB1YmxpYy9zcmMvanMvc2V0dXAvaW5kZXguanMgLSBkZWxpc2hcbiAqIFxuICogTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2UuXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgS2FyaW0gQWxpYmhhaS5cbiAqL1xuXG5pbXBvcnQgeyBsb2csIGZhaWwgfSBmcm9tICcuL2xvZ2dlcidcbmltcG9ydCBjcmVhdGVNYXAgZnJvbSAnLi9tYXAnXG5pbXBvcnQgY3JlYXRlQXBwIGZyb20gJy4vYXBwJ1xuaW1wb3J0IHsgZ2V0Rmlyc3RMb2NhdGlvbiB9IGZyb20gJy4vbG9jYXRpb24nXG5cbi8qKlxuICogUHJvbWlzZS1pZnkgR29vZ2xlIG1hcCBzdWNjZXNzLlxuICovXG5jb25zdCBtYXBSZWFkeSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICB3aW5kb3cuaW5pdE1hcCA9IHJlc29sdmVcbn0pXG5cbi8qKlxuICogTGlzdCBvZiB0YXNrcywgaW4gdGhlIG9yZGVyIHRoYXQgdGhleVxuICogbXVzdCBiZSBleGVjdXRlZC5cbiAqL1xuY29uc3QgdGFza3MgPSB7XG4gIG9yZGVyOiBbXG4gICAgJ0xvY2F0aW5nIHlvdScsXG4gICAgJ0NyZWF0aW5nIHNleHkgbWFwJyxcbiAgICAnV3JhcHBpbmcgdXAnXG4gIF0sXG5cbiAgLyoqXG4gICAqIFRyYWNrcyBkb3duIHlvdXIgZmlyc3QgbG9jYXRpb24uIE9yIGZhaWxzLlxuICAgKi9cbiAgJ0xvY2F0aW5nIHlvdSc6IHJlc29sdmUgPT4gZ2V0Rmlyc3RMb2NhdGlvbihyZXNvbHZlKSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBHb29nbGUgbWFwIGluc3RhbmNlXG4gICAqL1xuICAnQ3JlYXRpbmcgc2V4eSBtYXAnOiAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgbWFwUmVhZHkudGhlbigoKSA9PiB7XG4gICAgICBsZXQgbWFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIG1hcC5pZCA9ICdtYXAnXG4gICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShtYXAsIGRvY3VtZW50LmJvZHkuY2hpbGRyZW5bMF0pXG4gICAgICBjcmVhdGVNYXAobWFwLCByZXNvbHZlKVxuICAgIH0pLmNhdGNoKHJlamVjdClcblxuICAgIGxldCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKVxuICAgIHNjcmlwdC5zcmMgPSAnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP2tleT1BSXphU3lEUDY1Zk5ocmdMTVA5R3UyMEFUVW4yQ3h3UFFFcnhuZ1EmY2FsbGJhY2s9aW5pdE1hcCdcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdClcbiAgfSxcblxuICAvKipcbiAgICogTm90IGFjdHVhbGx5IHdyYXBwaW5nIHVwLiBUaGlzIGJyaW5ncyB1cCB0aGUgYXBwXG4gICAqIHZpYSBhbmd1bGFyLlxuICAgKi9cbiAgJ1dyYXBwaW5nIHVwJzogY3JlYXRlQXBwKGZhaWwpXG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGFza3Mgc2VxdWVudGlvbmFsbHkuXG4gKi9cbmZ1bmN0aW9uIG5leHQoKSB7XG4gIGkgKz0gMVxuXG4gIGlmIChpID09PSB0YXNrcy5vcmRlci5sZW5ndGgpIHtcbiAgICBsb2coJ09rYXkgSVxcJ20gcmVhZHkgbm93LicpXG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkaW5nJylcbiAgICB9LCAyMDAwKVxuICB9IGVsc2Uge1xuICAgIGxldCB0ZXh0ID0gdGFza3Mub3JkZXJbaV1cbiAgICBjb25zb2xlLndhcm4odGV4dCArICcgLi4uJylcbiAgICBsb2codGV4dCArICcgLi4uJylcblxuICAgIG5ldyBQcm9taXNlKHRhc2tzW3RleHRdKVxuICAgICAgLnRoZW4obmV4dClcbiAgICAgIC5jYXRjaChmYWlsKVxuICB9XG59XG5cbi8vIHN0YXJ0IHRhc2sgZXhlY3V0aW9uLCBzb29uXG5sZXQgaSA9IC0xXG5zZXRUaW1lb3V0KG5leHQsIDApIiwiLyoqXG4gKiBwdWJsaWMvc3JjL2pzL3NvY2tldC5qcyAtIGRlbGlzaFxuICogXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZS5cbiAqIENvcHlyaWdodCAoQykgMjAxNyBLYXJpbSBBbGliaGFpLlxuICovXG4vKiBnbG9iYWxzIGlvICovXG5cbmltcG9ydCB7IGZhaWwgfSBmcm9tICcuL2xvZ2dlcidcblxuLy8gc2V0dXAgZXJyb3IgaGFuZGxpbmcgYW5kIHRoZW4gZXhwb3NlXG5jb25zdCBzb2NrID0gaW8oKVxuc29jay5vbignZmFpbCcsIGZhaWwpXG5leHBvcnQgZGVmYXVsdCBzb2NrIl19\n"]}